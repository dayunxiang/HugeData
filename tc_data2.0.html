<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>大数据平台</title>
    <link rel="stylesheet" href="css/layui.css">
    <link rel="stylesheet" href="css/tc_data2.0.css">
</head>
<body>
<div class="container">
    <!--上部-->
    <div class="top">
        <div class="top_left"><span>987654321</span></div><!--左上角数字-->
        <div class="top_right"><span>987654321</span></div><!--右上角数字-->
        <!--截止日期和成立时间等信息-->
        <div class="center_top">
            <div class="expiration"><span>统计截止日期：</span><span>2018-04-01</span></div>
            <div class="middle_main">
                <table class="data">
                    <tr>
                        <td>成立时间</td>
                        <td>953</td>
                        <td>服务窗口</td>
                        <td>2001-2013</td>
                    </tr>
                    <tr>
                        <td>入厅面积</td>
                        <td>1578</td>
                        <td>大厅人员</td>
                        <td>43789</td>
                    </tr>
                </table>
            </div>

        </div>
    </div>
    <!--左半部-->
    <div class="left">
        <!--审批工作效能-->
        <div class="workEff">
            <h1 class="topic"><img src="imags/tc-topic_03.png"/></h1>
            <ul>
                <li>
                    <img src="imags/tc-icon_03.png" height="30" width="30" class="fl effIcon"/>
                    <div class="cell">
                        <p class="rate">23.35%</p>
                        <p class="rateInfo">提前办结率</p>
                    </div>
                </li>
                <li>
                    <img src="imags/tc-icon_05.png" height="30" width="30" class="fl effIcon"/>
                    <div class="cell">
                        <p class="rate">9<span class="rateInfo">/件</span></p>
                        <p class="rateInfo">超时办结</p>
                    </div>
                </li>
                <li>
                    <img src="imags/tc-icon_09.png" height="30" width="30" class="fl effIcon"/>
                    <div class="cell">
                        <p class="rate">95.35%</p>
                        <p class="rateInfo">按时办结率</p>
                    </div>
                </li>
                <li>
                    <img src="imags/tc-icon_10.png" height="30" width="30" class="fl effIcon"/>
                    <div class="cell">
                        <p class="rate">42<span class="rateInfo">/件</span></p>
                        <p class="rateInfo">超时预警</p>
                    </div>
                </li>
            </ul>
        </div>
        <!--各委办局的办件情况-->
        <div class="officeCase">
            <h1 class="topic" style="height: 40px;line-height: 40px;margin-bottom: 10px;"><img src="imags/tc-topic_06_new.png"/></h1>
            <div id="offCase" style="width: 660px;height: 137px;"></div>
        </div>
        <!--办件动态-->
        <div class="workTrends">
            <h1 style="height: 40px;line-height: 30px;"><img src="imags/tc-topic_25.png" height="20" width="90"/></h1>
            <dl>
                <dd></dd><dd>申办主体</dd><dd>受理事项</dd><dd>状态</dd><dd>申报日期</dd>
            </dl>
            <div class="marquee">
                <ul>
                    <li><span>1</span><span>张云秀申办主体申办主体申办主体申办主体</span><span>省教育厅</span><span>本村人员户籍迁移证明</span><span>2018-03-01</span></li>
                    <li><span>2</span><span>李泽林</span><span>省教育厅</span><span>本村人员户籍迁移证明</span><span>2018-03-01</span></li>
                    <li><span>3</span><span>王庆群</span><span>省教育厅</span><span>本村人员户籍迁移证明</span><span>2018-03-01</span></li>
                    <li><span>4</span><span>王庆群</span><span>省教育厅</span><span>本村人员户籍迁移证明</span><span>2018-03-01</span></li>
                    <li><span>5</span><span>王庆群</span><span>省教育厅</span><span>本村人员户籍迁移证明</span><span>2018-03-01</span></li>
                </ul>
            </div>
        </div>
        <!--互联互通整合-->
        <div class="connection">
            <h1 class="topic"><img src="imags/tc-topic_30.png" height="20"/></h1>
            <div class="item">
                <div class="proInfo">已接入<span class="proNum">15</span></div>
                <div class="layui-progress">
                    <div class="layui-progress-bar graBg-green" lay-percent="85%"></div>
                </div>
            </div>
            <div class="item">
                <div class="proInfo">未接入<span class="proNum">5</span></div>
                <div class="layui-progress">
                    <div class="layui-progress-bar graBg-red" lay-percent="15%"></div>
                </div>
            </div>
        </div>
        <!--办事主体概况-->
        <div class="situation">
            <h1 class="topic"><img src="imags/tc-topic_33.png" height="20"/></h1>
            <div class="item">
                <div class="proInfo clearfix">
                    <div class="fl">个人<span class="proNum">350</span></div>
                    <div class="fr">法人<span class="proNum">100</span></div>
                </div>
                <div class="layui-progress bg-yellow">
                    <div class="layui-progress-bar graBg-orange" lay-percent="75%"></div>
                </div>
            </div>
            <div class="item">
                <div class="proInfo">已完成认证用户<span class="proNum">123</span></div>
                <div class="layui-progress">
                    <div class="layui-progress-bar graBg-blue" lay-percent="80%"></div>
                </div>
            </div>
        </div>
    </div>
    <!--右半部-->
    <div class="right">
        <!--业务办理情况汇总-->
        <div class="workHandle">
            <h1 class="topic"><img src="imags/tc-topic_05.png"/></h1>
            <ul>
                <li class="handle_main">
                    <p class="handle_num textGreen">1212</p>
                    <p class="handle_info">本周累计办理</p>
                </li>
                <li class="handle_main">
                    <p class="handle_num textYellow">4122</p>
                    <p class="handle_info">本月累计办理</p>
                </li>
                <li class="handle_main">
                    <p class="handle_num textBlue">63197</p>
                    <p class="handle_info">本年度累计办理</p>
                </li>
            </ul>
        </div>
        <!--业务办理情况Top10-->
        <div class="workTop">
            <h1 class="topic"><img src="imags/tc-topic.png" alt=""><span class="topic_name">热点事项Top10</span></h1>
            <ul>
                <li class="topItem">
                    <span class="topText">TOP01</span>
                    <div class="layui-progress">
                        <div class="layui-progress-bar graBg-purple" lay-percent="65%">
                            <span class="layui-progress-text workName"> 建筑设计方案节能审查</span>
                        </div>
                    </div>
                </li>
                <li class="topItem">
                    <span class="topText">TOP02</span>
                    <div class="layui-progress">
                        <div class="layui-progress-bar graBg-purple" lay-percent="45%">
                            <span class="layui-progress-text workName"> 建筑设计方案审定意见</span>
                        </div>
                    </div>
                </li>
                <li class="topItem">
                    <span class="topText">TOP03</span>
                    <div class="layui-progress">
                        <div class="layui-progress-bar graBg-purple" lay-percent="35%">
                            <span class="layui-progress-text workName">市政基础设施拆除开挖备案</span>
                        </div>
                    </div>
                </li>
                <li class="topItem">
                    <span class="topText">TOP04</span>
                    <div class="layui-progress">
                        <div class="layui-progress-bar graBg-purple" lay-percent="30%">
                            <span class="layui-progress-text workName">建设工程施工图审查初审</span>
                        </div>
                    </div>
                </li>
                <li class="topItem">
                    <span class="topText">TOP05</span>
                    <div class="layui-progress">
                        <div class="layui-progress-bar graBg-purple" lay-percent="25%">
                            <span class="layui-progress-text workName">省外勘察设计单位进市承接单项工程资质核验单项</span>
                        </div>
                    </div>
                </li>
                <li class="topItem">
                    <span class="topText">TOP06</span>
                    <div class="layui-progress">
                        <div class="layui-progress-bar graBg-purple" lay-percent="25%">
                            <span class="layui-progress-text workName">省外勘察设计单位进市承接</span>
                        </div>
                    </div>
                </li>
                <li class="topItem">
                    <span class="topText">TOP07</span>
                    <div class="layui-progress">
                        <div class="layui-progress-bar graBg-purple" lay-percent="25%">
                            <span class="layui-progress-text workName">省外勘察设计单位进市</span>
                        </div>
                    </div>
                </li>
                <li class="topItem">
                    <span class="topText">TOP08</span>
                    <div class="layui-progress">
                        <div class="layui-progress-bar graBg-purple" lay-percent="25%">
                            <span class="layui-progress-text workName">省外勘察设计单位进市承接单项</span>
                        </div>
                    </div>
                </li>
                <li class="topItem">
                    <span class="topText">TOP09</span>
                    <div class="layui-progress">
                        <div class="layui-progress-bar graBg-purple" lay-percent="25%">
                            <span class="layui-progress-text workName">省外勘察设计单位</span>
                        </div>
                    </div>
                </li>
                <li class="topItem">
                    <span class="topText">TOP10</span>
                    <div class="layui-progress">
                        <div class="layui-progress-bar graBg-purple" lay-percent="25%">
                            <span class="layui-progress-text workName">省外勘察设计单位</span>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <!--服务窗口满意度-->
        <div class="satisfaction">
            <h1 class="topic"><img src="imags/tc-topic.png" alt=""><span class="topic_name">服务窗口上月得分</span></h1>
            <table class="satisfaMain">
                <tr><td>卫生</td><td>99%</td><td>消防</td><td>99%</td></tr>
                <tr><td>文体</td><td>99%</td><td>规划</td><td>99%</td></tr>
                <tr><td>水利</td><td>99%</td><td>国税</td><td>99%</td></tr>
                <tr><td>民政</td><td>99%</td><td>发改</td><td>99%</td></tr>
                <tr><td>交运</td><td>99%</td><td>安监</td><td>99%</td></tr>
            </table>
        </div>
        <!--业务平均办理时限统计-->
        <div class="limitTime">
            <h1 class="topic"><img src="imags/tc-topic_23.png"/></h1>
            <div id="3dBar" style="width: 189px;height: 210px;position: absolute"></div>
            <p class="timeTop">10</p><p class="topLine"></p><p class="topMsg">服务事项法定承诺时限</p><!--timeTop:柱体上的时间；topLine:柱体两侧的竖线；topMsg:柱体两侧文本-->
            <p class="timeMiddle">7</p><p class="middleLine"></p><p class="middleMsg">业务平均承诺时限</p>
            <p class="timeBottom">5</p><p class="bottomLine"></p><p class="bottomMsg">业务平均办理时限</p>

        </div>
    </div>
</div>
<script src="js/jquery-3.2.1.min.js"></script>
<script src="js/layui.all.js"></script>
<script src="js/echarts.min.js"></script>
<script src="js/echarts-gl.min.js"></script>
<script>
    $(function () {
        var $topLeft=$(".top_left span");                 /*左上数字*/
        var $topRight=$(".top_right span");              /*右上数字*/
        var $tds=$(".middle_main tr td:nth-child(2n)"); /*列表数字*/
        var $nums=$(".workHandle .handle_num");         /*业务办理情况*/
        var workName=document.getElementsByClassName('workName');
        var offCase=echarts.init(document.getElementById("offCase"));
        var limitTime=echarts.init(document.getElementById("3dBar"));
        var dataAxis=["区国税局","区教育局","区城管局","区商务局","区财政局","区司法局",'区金融办'];/*X轴数据*/
        var data=[400000,670000,480000,780000,300000,360000,500000];   /*X轴对应y值*/
        // var yMax=800000,dataShadow=[],i;  /*动态获取yMAx?*/

        // for(i=0; i<data.length; i++){dataShadow.push(yMax);}
        var option={
            tooltip:{
                trigger:'axis'
            },
            grid:{
                containLabel:true,/*包含xy轴文字*/
                top:5,             /*设置整体位置*/
                left:'left',
                bottom:0,
                right:0
            },
            xAxis:{
                data:dataAxis,
                axisLabel:{
                    textStyle:{           /* x轴文字样式 */
                        color:'rgb(252,255,255,0.8)'
                    },
                    rotate:30
                },
                axisLine:{                  /*x轴轴线样式*/
                    lineStyle:{color:'rgb(12,43,90,0.5)'}
                },
                axisTick:{show:false},       /*不显示刻度*/
                axisPointer:{type:'shadow'}
            },
            yAxis:{
                axisLabel:{color:'#60adfd',fontSize:9}, /*y文字颜色*/
                axisLine:{                  /*y轴轴线样式*/
                    lineStyle:{color:'rgb(12,43,90,0.5)'}
                },
                splitLine:{                 /*y轴分割线设置*/
                    lineStyle:{color:'rgb(12,43,90,0.5)'}
                }
            },
            series:[
                /*{/!*上方阴影效果*!/
                    type:'bar',
                    barGap:'-100%',
                    barWidth:10,
                    data:dataShadow,
                    tooltip:{show:false},
                    itemStyle:{normal:{color:'#061c47',barBorderRadius:[5,5,0,0]}}
                },*/
                {
                    type: 'bar',
                    barGap: '-100%',
                    barWidth:10,
                    data: data,
                    itemStyle: {
                        normal: {
                            /*设置柱形颜色*/
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1,
                                [{offset: 0, color: '#1ca5ff'}, {offset: 1, color: '#0065ef'}]
                            ),
                            barBorderRadius:[5,5,0,0]
                        }
                    }
                }]
        };
        offCase.setOption(option);
        var options=offCase.getOption();
        console.log(options);
        /*业务办理文字定位*/
        for(i=0;i<workName.length;i++){
            workName[i].style.right=(-(workName[i].clientWidth+7))+"px";
        }
        /*3dBar*/
        var hours = ['12a', '1a', '2a', '3a', '4a', '5a'];
        var days = ['Saturday', 'Friday', 'Thursday'];
        var limitOption={
            xAxis3D: {
                data: hours
            },
            yAxis3D: {
                data: days
            },
            zAxis3D: {},
            grid3D: {
                show: false,
                boxWidth:200,
                boxHeight:169,
                boxDepth: 110,
                viewControl: {
                    rotateSensitivity:0,  /*鼠标不旋转*/
                    zoomSensitivity:0,     /*鼠标不能放大缩小*/
                    beta:60,               /*左右旋转角度*/
                    alpha:10               /*旋转*/
                }
            },
            series: [{
                type: 'bar3D',
                data: [{value: [2, 1, 5], itemStyle: {color: "#1476f1"}}],  /*最下面块，0、3不动,最后的数据代表长度*/
                shading: 'lambert',/*着色效果*/
                stack: 'stack',/*着堆叠效果*/
                silent:true   /*不触发鼠标事件*/

            },
                {
                    type: 'bar3D',
                    data: [{value: [2, 1, 2], itemStyle: {color: "#f9cb00"}}], /*向上叠加

                    ，中间块*/
                    shading: 'lambert',
                    stack: 'stack',
                    silent:true
                },
                {
                    type: 'bar3D',
                    data: [{value: [2, 1, 3], itemStyle: {color: "#818fa5"}}], /*上面块*/
                    shading: 'lambert',
                    stack: 'stack',
                    silent:true
                }
            ]
        };
        limitTime.setOption(limitOption);
        /*数字加逗号*/
        $topLeft.text(parseFloat($topLeft.text()).toLocaleString());
        $topRight.text(parseFloat($topRight.text()).toLocaleString());
        $tds.each(function () {
            $(this).text(parseFloat($(this).text()).toLocaleString());
        });
        $nums.each(function () {
            $(this).text(parseFloat($(this).text()).toLocaleString());
        });
        /*办件动态间歇滚动*/
        setInterval("autoRoll('.marquee ul')",3000);
    });
    function autoRoll(obj) {
        $(obj).animate({marginTop:"-23px"},500,function () {
            $(this).css("margin-top",0).find("li:first").appendTo(this);
        });
    }
</script>
</body>
</html>